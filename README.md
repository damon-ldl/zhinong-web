#  智慧农业病害诊疗系统 

## **1. 产品概述**

### 1.1 产品背景

随着智慧农业与人工智能的发展，农作物病害检测与诊疗正逐步从人工经验转向智能化、数据驱动化。
 本系统旨在构建一个基于 **图像识别 + 大语言模型（LLM）** 的农作物病害诊疗系统，实现：

- 自动识别作物病害；
- 智能生成诊疗建议；
- 结构化展示与记录诊疗方案；
- 支持历史记录查询与持续学习优化。

### 1.2 产品目标

- 提供一体化的病害诊疗服务；
- 降低农业生产中病害识别与处理的技术门槛；
- 为农业专家和农户提供辅助决策支持；
- 支撑农业领域智能问答与知识沉淀。

### 1.3 产品定位

定位为面向农技人员、农户与科研人员的轻量化 Web 应用，
 具备“上传图像 → 智能诊断 → 自动生成诊疗方案 → 存档与复查”的一站式功能。

------

## **2. 用户与使用场景**

### 2.1 目标用户

| 用户类型 | 典型角色               | 主要目标                         |
| -------- | ---------------------- | -------------------------------- |
| 农技人员 | 农业推广员、农场管理者 | 快速诊断病害，给出防治方案       |
| 农户     | 普通种植户             | 上传照片快速获得指导             |
| 科研人员 | 农业科研所专家         | 验证模型诊断准确率、分析病害样本 |

### 2.2 使用场景

1. 农户发现作物出现异常 → 上传作物图片；
2. 系统识别病害并生成诊疗报告；
3. 农户查看报告（包含防治方案、注意事项）；
4. 历史记录可供对比分析。

------

## **3. 功能需求**

### **3.1 功能结构图**

```
用户层
 ├── 登录注册
 ├── 图像上传
 ├── 病害识别
 ├── 智能诊疗生成
 ├── 历史记录
 └── 系统设置
```

------

### **3.2 功能模块说明**

| 模块名称           | 模块说明                         | 关键功能点                     |
| ------------------ | -------------------------------- | ------------------------------ |
| 🟢 **用户管理模块** | 提供登录、注册、身份校验         | JWT 鉴权 / 用户信息管理        |
| 🟢 **图像上传模块** | 用户上传作物图片                 | 图像压缩、格式校验、进度条上传 |
| 🟢 **病害识别模块** | 后端调用视觉模型识别作物病害     | 图像识别 / 病害名称返回        |
| 🟢 **智能诊疗模块** | 调用训练好的模型                 | Prompt 模板化、结构化输出      |
| 🟢 **结果展示模块** | 以 Markdown/卡片形式展示诊疗报告 | 模板渲染 / 高亮关键要素        |
| 🟢 **历史记录模块** | 查看与管理过往诊疗记录           | 列表展示 / 报告详情 / 导出 PDF |
| 🟢 **系统设置模块** | 管理 API Key、模型选择、界面设置 | 模型配置 / 语言设置            |

------

## **4. 系统架构设计**

### 4.1 技术栈

| 层级             | 技术                                     | 说明                     |
| ---------------- | ---------------------------------------- | ------------------------ |
| 前端             | Vue3 + Vite + Element Plus + Axios       | 实现交互、上传与展示     |
| 后端             | FastAPI (Python) + Pydantic + SQLAlchemy | 提供接口与业务逻辑       |
| 数据库           | SQLite                                   | 存储用户、日志与诊疗记录 |
| 模型层（算法层） | 训练相关模型                             | 智能诊疗生成             |


------

### 4.2 模块分层架构

```
前端层（Vue3）
 ├── 登录与注册模块
 ├── 图像上传模块
 ├── 诊疗生成模块
 ├── 历史记录模块
 └── 系统设置模块
       ↓ axios
后端层（FastAPI）
 ├── 用户管理模块
 ├── 图像识别模块
 ├── 智能诊疗生成模块
 ├── 日志与历史模块
 └── API Key / 模型配置模块
       ↓
数据库层（SQLite）
 ├── 用户表 users
 ├── 诊疗记录表 records
 └── 系统配置表 settings
```

------

## **5. 交互与流程设计**

### 5.1 用户主流程

```
[登录] → [上传图像] → [图像识别] → [生成诊疗报告] → [查看结果] → [保存/导出记录]
```

### 5.2 详细交互逻辑

1. **登录页**：用户输入账号密码 → FastAPI 验证 → JWT 返回；
2. **上传页**：用户上传图像 → 后端识别模型返回病害类别；
3. **诊疗页**：输入问题 → 系统调用 LLM 接口 → 返回诊疗方案；
4. **结果页**：展示 Markdown 报告，可保存或导出；
5. **历史页**：从 SQLite 调取记录列表与报告详情。

------

## **6. 数据设计**

### 6.1 数据表概览

| 表名       | 字段                                       | 说明         |
| ---------- | ------------------------------------------ | ------------ |
| `users`    | id, username, password, role               | 用户信息     |
| `records`  | id, user_id, image_path, result, timestamp | 诊疗记录     |
| `settings` | id, api_key, model_name, config            | 系统配置参数 |

------

